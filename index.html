<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V·∫≠t L√Ω 8 - B√†i: N·ªôi NƒÉng - Th·∫ßy L√¢m</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- MathJax Configuration -->
    <script>
    MathJax = {
      loader: {load: ['input/tex', 'output/chtml']},
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      chtml: {
        fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
      }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0fdf4; /* Green-50 */
        }
        
        .hand-font {
            font-family: 'Patrick Hand', cursive;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #888; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }

        /* Animations */
        .fade-out-up {
            transition: transform 700ms ease-in-out, opacity 700ms ease-in-out;
            opacity: 0;
            transform: translateY(-100%);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Desktop Active Tab */
        .active-tab {
            border-bottom: 3px solid #15803d; /* green-700 */
            color: #15803d;
            font-weight: 700;
            background-color: #dcfce7; /* green-100 */
        }

        /* Mobile Active Tab */
        .active-mobile-tab {
            background-color: #dcfce7; /* green-100 */
            color: #14532d; /* green-900 */
            font-weight: 700;
            border-left: 4px solid #16a34a; /* green-600 */
        }

        /* Button Styles */
        .btn-primary {
            border-radius: 9999px; /* Pill shaped */
            background: linear-gradient(to right, #10b981, #16a34a); /* Gradient Green */
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .btn-secondary {
            border-radius: 0.5rem; /* Medium rounded */
            background-color: #facc15; /* Yellow-400 */
            color: #713f12; /* Yellow-900 */
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        .btn-secondary:hover {
            background-color: #eab308; /* Yellow-500 */
            font-weight: 600;
        }

        /* SVG Styles */
        .svg-container {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
            margin: 20px auto;
            display: block;
        }
    </style>
</head>
<body class="overflow-x-hidden text-gray-800">

    <!-- 1. COVER PAGE (B√¨a S√°ch) -->
    <div id="cover-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-gradient-to-br from-green-100 via-yellow-50 to-green-200 text-center p-4">
        <div class="max-w-3xl w-full border-4 border-double border-green-700 p-8 rounded-lg bg-white shadow-2xl relative">
            <div class="absolute top-0 left-0 w-full h-full border border-green-200 pointer-events-none m-1"></div>
            
            <h3 class="text-xl text-green-600 font-bold uppercase tracking-widest mb-2">V·∫≠t L√Ω L·ªõp 8</h3>
            <h1 class="text-5xl md:text-7xl font-bold text-green-800 mb-6 hand-font">N·ªòI NƒÇNG</h1>
            <p class="text-lg md:text-xl text-gray-600 italic mb-8">
                "M·ªôt h·∫°t mu·ªëi kh√¥ng l√†m m·∫∑n bi·ªÉn c·∫£,<br>nh∆∞ng h√†ng t·ª∑ ph√¢n t·ª≠ chuy·ªÉn ƒë·ªông l√†m n√™n s·ª± s·ªëng."
            </p>
            
            <div class="flex items-center justify-center space-x-4 mb-10">
                <div class="w-16 h-16 rounded-full bg-yellow-300 flex items-center justify-center text-3xl shadow-lg border-2 border-white">üë®‚Äçüè´</div>
                <div class="text-left">
                    <p class="font-bold text-gray-800 text-lg">Gi√°o vi√™n: Th·∫ßy L√¢m</p>
                    <p class="text-sm text-gray-500">Ng∆∞·ªùi k·ªÉ chuy·ªán V·∫≠t L√Ω</p>
                </div>
            </div>

            <button onclick="startLearning()" class="btn-primary px-8 py-4 text-xl font-bold tracking-wide uppercase">
                B·∫Øt ƒë·∫ßu h·ªçc ngay
            </button>
        </div>
    </div>

    <!-- 2. MAIN APPLICATION -->
    <div id="main-app" class="hidden min-h-screen flex flex-col">
        
        <!-- HEADER / NAVIGATION -->
        <header class="bg-white shadow-md sticky top-0 z-40">
            <!-- Mobile Header Bar -->
            <div class="flex justify-between items-center p-4 lg:hidden bg-green-50">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">üåø</span>
                    <h1 class="font-bold text-green-800 text-lg">Th·∫ßy L√¢m V·∫≠t L√Ω</h1>
                </div>
                <button id="hamburger-button" onclick="openMenu()" class="text-green-800 focus:outline-none p-2 rounded hover:bg-green-200">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>

            <!-- Desktop Nav (Horizontal) -->
            <nav class="hidden lg:flex justify-center container mx-auto px-4">
                <div class="flex space-x-1 py-2">
                    <button onclick="switchTab('tab-intro')" class="nav-btn px-6 py-3 rounded-t-lg hover:bg-green-50 transition-colors font-medium text-gray-600" data-target="tab-intro">L·ªùi N√≥i ƒê·∫ßu</button>
                    <button onclick="switchTab('tab-1')" class="nav-btn px-6 py-3 rounded-t-lg hover:bg-green-50 transition-colors font-medium text-gray-600" data-target="tab-1">1. N·ªôi nƒÉng l√† g√¨?</button>
                    <button onclick="switchTab('tab-2')" class="nav-btn px-6 py-3 rounded-t-lg hover:bg-green-50 transition-colors font-medium text-gray-600" data-target="tab-2">2. Thay ƒë·ªïi n·ªôi nƒÉng</button>
                    <button onclick="switchTab('tab-3')" class="nav-btn px-6 py-3 rounded-t-lg hover:bg-green-50 transition-colors font-medium text-gray-600" data-target="tab-3">3. Nhi·ªát l∆∞·ª£ng</button>
                    <button onclick="switchTab('tab-quiz')" class="nav-btn px-6 py-3 rounded-t-lg hover:bg-green-50 transition-colors font-medium text-red-600" data-target="tab-quiz">üìù Ki·ªÉm Tra</button>
                </div>
            </nav>
        </header>

        <!-- Mobile Sidebar Menu (Slide-in) -->
        <div id="mobile-menu" class="fixed inset-y-0 left-0 w-64 bg-white shadow-2xl transform -translate-x-full transition-transform duration-300 ease-in-out z-50 lg:hidden flex flex-col">
            <div class="p-4 flex justify-between items-center border-b border-green-100 bg-green-50">
                <h2 class="font-bold text-xl text-green-800">Menu B√†i H·ªçc</h2>
                <button id="close-menu-button" onclick="closeMenu()" class="text-gray-500 hover:text-red-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto py-4">
                <button onclick="switchTab('tab-intro')" class="mobile-nav-btn w-full text-left px-6 py-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-gray-700" data-target="tab-intro">L·ªùi N√≥i ƒê·∫ßu</button>
                <button onclick="switchTab('tab-1')" class="mobile-nav-btn w-full text-left px-6 py-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-gray-700" data-target="tab-1">1. N·ªôi nƒÉng l√† g√¨?</button>
                <button onclick="switchTab('tab-2')" class="mobile-nav-btn w-full text-left px-6 py-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-gray-700" data-target="tab-2">2. Thay ƒë·ªïi n·ªôi nƒÉng</button>
                <button onclick="switchTab('tab-3')" class="mobile-nav-btn w-full text-left px-6 py-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-gray-700" data-target="tab-3">3. Nhi·ªát l∆∞·ª£ng</button>
                <button onclick="switchTab('tab-quiz')" class="mobile-nav-btn w-full text-left px-6 py-4 hover:bg-red-50 transition-colors text-red-600 font-bold" data-target="tab-quiz">üìù B√†i Ki·ªÉm Tra</button>
            </div>
            <div class="p-4 bg-gray-50 text-center text-xs text-gray-500">
                H·ªçc c√πng Th·∫ßy L√¢m ‚ù§Ô∏è
            </div>
        </div>

        <!-- Overlay for mobile menu -->
        <div id="menu-overlay" onclick="closeMenu()" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"></div>

        <!-- CONTENT AREA -->
        <main class="flex-grow container mx-auto px-4 py-8 max-w-5xl">
            
            <!-- Tab: Gi·ªõi Thi·ªáu -->
            <div id="tab-intro" class="tab-content active">
                <div class="bg-white rounded-2xl p-8 shadow-sm border-t-4 border-yellow-400">
                    <h2 class="text-3xl font-bold text-green-800 mb-6 hand-font">Ch√†o c√°c tr√≤ th√¢n y√™u c·ªßa th·∫ßy! üëã</h2>
                    <div class="prose max-w-none text-lg leading-relaxed text-gray-700">
                        <p class="mb-4">
                            H√¥m nay, th·∫ßy mu·ªën k·ªÉ cho c√°c em nghe m·ªôt c√¢u chuy·ªán nh·ªè. C√°c em ƒë√£ bao gi·ªù nh√¨n th·∫•y m·ªôt ·∫•m n∆∞·ªõc ƒëang s√¥i ch∆∞a? N·∫Øp ·∫•m c·ª© nh·∫£y l√™n b·∫ßn b·∫≠t nh∆∞ ƒëang m√∫a v·∫≠y.
                        </p>
                        <p class="mb-4">
                            Ng√†y x∆∞a, ng∆∞·ªùi ta nghƒ© r·∫±ng c√≥ m·ªôt lo·∫°i "ch·∫•t l·ªèng v√¥ h√¨nh" g·ªçi l√† nhi·ªát ch·∫•t ch·∫£y v√†o n∆∞·ªõc l√†m n√≥ n√≥ng l√™n. Nh∆∞ng kh√¥ng ph·∫£i ƒë√¢u! S·ª± th·∫≠t th√∫ v·ªã h∆°n nhi·ªÅu.
                        </p>
                        <p class="mb-4">
                            B√™n trong gi·ªçt n∆∞·ªõc b√© t√≠ x√≠u kia l√† h√†ng t·ª∑ t·ª∑ c√°c "b·∫°n nh·ªè" ph√¢n t·ª≠ ƒëang ch·∫°y nh·∫£y lung tung kh√¥ng bi·∫øt m·ªát m·ªèi. Khi c√°c b·∫°n ·∫•y ch·∫°y c√†ng nhanh, va ch·∫°m c√†ng m·∫°nh, th√¨ n∆∞·ªõc c√†ng n√≥ng v√† ƒë·∫ßy nƒÉng l∆∞·ª£ng. C√°i nƒÉng l∆∞·ª£ng ·∫©n gi·∫•u b√™n trong ƒë√≥, ng∆∞·ªùi ta g·ªçi l√† <strong>N·ªòI NƒÇNG</strong>.
                        </p>
                        <p>
                            H√£y c√πng th·∫ßy ƒëi s√¢u v√†o th·∫ø gi·ªõi t√≠ hon n√†y ƒë·ªÉ kh√°m ph√° xem c√°c b·∫°n ph√¢n t·ª≠ ·∫•y ƒëang l√†m tr√≤ g√¨ nh√©!
                        </p>
                    </div>
                    <div class="mt-8 text-center">
                        <button onclick="switchTab('tab-1')" class="btn-primary px-8 py-3 text-lg font-bold">
                            Kh√°m ph√° ngay üöÄ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tab 1: N·ªôi nƒÉng l√† g√¨ -->
            <div id="tab-1" class="tab-content">
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- L√Ω thuy·∫øt -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm">
                        <h2 class="text-2xl font-bold text-green-700 mb-4 border-l-4 border-yellow-400 pl-3">1. N·ªôi nƒÉng l√† g√¨?</h2>
                        <ul class="space-y-4 text-gray-700">
                            <li>
                                <strong>ƒê·ªãnh nghƒ©a:</strong> N·ªôi nƒÉng c·ªßa v·∫≠t l√† t·ªïng <em>ƒë·ªông nƒÉng</em> v√† <em>th·∫ø nƒÉng</em> c·ªßa c√°c ph√¢n t·ª≠ c·∫•u t·∫°o n√™n v·∫≠t.
                                <div class="bg-yellow-50 p-3 rounded mt-2 border border-yellow-200">
                                    $$U = W_{ƒë} + W_{t}$$
                                    <span class="text-sm text-gray-500 block text-center">(U: N·ªôi nƒÉng)</span>
                                </div>
                            </li>
                            <li>
                                <strong>ƒê·ªông nƒÉng ph√¢n t·ª≠ ($W_ƒë$):</strong> Do c√°c ph√¢n t·ª≠ chuy·ªÉn ƒë·ªông h·ªón ƒë·ªôn kh√¥ng ng·ª´ng. Nhi·ªát ƒë·ªô c√†ng cao $\rightarrow$ chuy·ªÉn ƒë·ªông c√†ng nhanh $\rightarrow$ ƒë·ªông nƒÉng c√†ng l·ªõn.
                            </li>
                            <li>
                                <strong>Th·∫ø nƒÉng ph√¢n t·ª≠ ($W_t$):</strong> Do l·ª±c t∆∞∆°ng t√°c gi·ªØa c√°c ph√¢n t·ª≠ (h√∫t v√† ƒë·∫©y). Ph·ª• thu·ªôc v√†o kho·∫£ng c√°ch gi·ªØa c√°c ph√¢n t·ª≠ (th·ªÉ t√≠ch).
                            </li>
                            <li>
                                <span class="text-green-600 font-bold">K·∫øt lu·∫≠n:</span> N·ªôi nƒÉng ph·ª• thu·ªôc v√†o nhi·ªát ƒë·ªô v√† th·ªÉ t√≠ch c·ªßa v·∫≠t.
                            </li>
                        </ul>
                    </div>
                    
                    <!-- M√¥ ph·ªèng -->
                    <div class="bg-gray-50 rounded-2xl p-6 shadow-inner text-center">
                        <h3 class="font-bold text-gray-600 mb-2">M√¥ ph·ªèng: Chuy·ªÉn ƒë·ªông nhi·ªát</h3>
                        <p class="text-sm text-gray-500 mb-4">K√©o thanh tr∆∞·ª£t ƒë·ªÉ tƒÉng nhi·ªát ƒë·ªô!</p>
                        
                        <svg id="svg-internal-energy" class="svg-container" width="300" height="200" viewBox="0 0 300 200">
                            <rect x="0" y="0" width="300" height="200" fill="#f3f4f6" stroke="#9ca3af" stroke-width="4"/>
                            <!-- Particles will be injected here by JS -->
                        </svg>

                        <div class="flex items-center justify-center gap-4 mt-4">
                            <span class="text-blue-500 font-bold">‚ùÑÔ∏è L·∫°nh</span>
                            <input type="range" id="temp-slider-1" min="1" max="10" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span class="text-red-500 font-bold">üî• N√≥ng</span>
                        </div>
                        <p id="temp-display-1" class="mt-2 font-mono text-green-700">Nhi·ªát ƒë·ªô: Th·∫•p</p>
                    </div>
                </div>
            </div>

            <!-- Tab 2: C√°c c√°ch thay ƒë·ªïi n·ªôi nƒÉng -->
            <div id="tab-2" class="tab-content">
                <div class="bg-white rounded-2xl p-6 shadow-sm mb-8">
                    <h2 class="text-2xl font-bold text-green-700 mb-4 border-l-4 border-yellow-400 pl-3">2. C√°c c√°ch thay ƒë·ªïi n·ªôi nƒÉng</h2>
                    <p class="mb-4 text-gray-700">C√≥ 2 c√°ch ch√≠nh ƒë·ªÉ l√†m thay ƒë·ªïi n·ªôi nƒÉng c·ªßa m·ªôt v·∫≠t ($\Delta U$):</p>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- C√°ch 1 -->
                        <div class="border border-green-200 rounded-xl p-4 bg-green-50 hover:shadow-md transition">
                            <h3 class="font-bold text-green-800 text-lg mb-2">a. Th·ª±c hi·ªán c√¥ng</h3>
                            <p class="text-sm text-gray-600 mb-2">T√°c ƒë·ªông l·ª±c l√†m v·∫≠t d·ªãch chuy·ªÉn ho·∫∑c bi·∫øn d·∫°ng.</p>
                            <p class="text-sm italic">V√≠ d·ª•: C·ªç x√°t mi·∫øng ƒë·ªìng, n√©n kh√≠ trong xilanh.</p>
                            <div class="mt-2 text-center">
                                <button onclick="triggerPistonAction('work')" class="btn-secondary px-3 py-1 text-sm">N√©n Xilanh (Xem h√¨nh d∆∞·ªõi)</button>
                            </div>
                        </div>

                        <!-- C√°ch 2 -->
                        <div class="border border-yellow-200 rounded-xl p-4 bg-yellow-50 hover:shadow-md transition">
                            <h3 class="font-bold text-yellow-800 text-lg mb-2">b. Truy·ªÅn nhi·ªát</h3>
                            <p class="text-sm text-gray-600 mb-2">L√†m thay ƒë·ªïi n·ªôi nƒÉng kh√¥ng th·ª±c hi·ªán c√¥ng.</p>
                            <p class="text-sm italic">V√≠ d·ª•: H∆° mi·∫øng ƒë·ªìng tr√™n l·ª≠a, th·∫£ mi·∫øng ƒë·ªìng v√†o n∆∞·ªõc n√≥ng.</p>
                            <div class="mt-2 text-center">
                                <button onclick="triggerPistonAction('heat')" class="btn-secondary px-3 py-1 text-sm">ƒê·ªët l·ª≠a (Xem h√¨nh d∆∞·ªõi)</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- M√¥ ph·ªèng SVG Tab 2 -->
                <div class="bg-white rounded-2xl p-6 shadow-sm flex flex-col items-center">
                    <h3 class="font-bold text-gray-600 mb-4">M√¥ ph·ªèng: Piston kh√≠</h3>
                    <div class="flex gap-4 mb-4">
                        <button onclick="triggerPistonAction('work')" class="btn-primary px-4 py-2 text-sm">Th·ª±c hi·ªán c√¥ng (N√©n)</button>
                        <button onclick="triggerPistonAction('heat')" class="btn-secondary px-4 py-2 text-sm">Truy·ªÅn nhi·ªát (ƒê·ªët)</button>
                        <button onclick="triggerPistonAction('reset')" class="px-4 py-2 text-sm bg-gray-200 rounded hover:bg-gray-300">L√†m l·∫°i</button>
                    </div>

                    <svg id="svg-work-heat" class="svg-container" width="300" height="250" viewBox="0 0 300 250">
                        <!-- Cylinder -->
                        <rect x="100" y="50" width="100" height="150" fill="none" stroke="#333" stroke-width="3" />
                        <line x1="100" y1="200" x2="200" y2="200" stroke="#333" stroke-width="3" />
                        
                        <!-- Gas Area -->
                        <rect id="gas-area" x="103" y="100" width="94" height="97" fill="#e0f2fe" opacity="0.8" />
                        
                        <!-- Piston Head -->
                        <rect id="piston-head" x="103" y="90" width="94" height="10" fill="#94a3b8" stroke="#64748b" />
                        <!-- Piston Rod -->
                        <rect id="piston-rod" x="145" y="0" width="10" height="90" fill="#94a3b8" />
                        
                        <!-- Flame (Hidden initially) -->
                        <g id="flame-group" opacity="0" transform="translate(135, 210)">
                            <path d="M15 0 Q0 15 15 30 Q30 15 15 0" fill="red" />
                            <path d="M15 5 Q5 15 15 25 Q25 15 15 5" fill="orange" />
                        </g>
                        
                        <!-- Hand (Hidden initially) -->
                        <text id="hand-emoji" x="135" y="0" font-size="30" opacity="0">üëá</text>
                    </svg>
                    <p id="piston-status" class="text-green-700 font-bold h-6">Tr·∫°ng th√°i: B√¨nh th∆∞·ªùng</p>
                </div>
            </div>

            <!-- Tab 3: Nhi·ªát l∆∞·ª£ng -->
            <div id="tab-3" class="tab-content">
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- L√Ω Thuy·∫øt -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm">
                        <h2 class="text-2xl font-bold text-green-700 mb-4 border-l-4 border-yellow-400 pl-3">3. Nhi·ªát l∆∞·ª£ng</h2>
                        <ul class="space-y-4 text-gray-700">
                            <li>
                                <strong>ƒê·ªãnh nghƒ©a:</strong> Nhi·ªát l∆∞·ª£ng l√† ph·∫ßn nhi·ªát nƒÉng m√† v·∫≠t nh·∫≠n th√™m ƒë∆∞·ª£c hay m·∫•t b·ªõt ƒëi trong qu√° tr√¨nh truy·ªÅn nhi·ªát.
                            </li>
                            <li>
                                <strong>K√Ω hi·ªáu:</strong> $Q$
                            </li>
                            <li>
                                <strong>ƒê∆°n v·ªã:</strong> Jun ($J$)
                            </li>
                            <li class="bg-green-50 p-4 rounded-lg border border-green-200">
                                <strong>C√¥ng th·ª©c t√≠nh nhi·ªát l∆∞·ª£ng:</strong>
                                $$Q = m \cdot c \cdot \Delta t$$
                                <ul class="text-sm mt-2 ml-4 list-disc">
                                    <li>$m$: Kh·ªëi l∆∞·ª£ng ($kg$)</li>
                                    <li>$c$: Nhi·ªát dung ri√™ng ($J/kg.K$)</li>
                                    <li>$\Delta t$: ƒê·ªô tƒÉng nhi·ªát ƒë·ªô ($^\circ C$ ho·∫∑c $K$)</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <!-- M√¥ ph·ªèng -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm text-center">
                        <h3 class="font-bold text-gray-600 mb-2">Th√≠ nghi·ªám ·∫£o: ƒêun n∆∞·ªõc</h3>
                        <p class="text-sm text-gray-500 mb-4">B·∫•m n√∫t ƒë·ªÉ c·∫•p nhi·ªát l∆∞·ª£ng Q</p>
                        
                        <svg id="svg-calorimetry" class="svg-container" width="200" height="300" viewBox="0 0 200 300">
                            <!-- Beaker -->
                            <path d="M50 50 L50 250 L150 250 L150 50" fill="none" stroke="#333" stroke-width="3" />
                            
                            <!-- Water -->
                            <rect id="water-rect" x="53" y="150" width="94" height="100" fill="#60a5fa" opacity="0.6" />
                            
                            <!-- Thermometer -->
                            <rect x="160" y="50" width="10" height="200" rx="5" fill="#f3f4f6" stroke="#9ca3af" />
                            <rect id="thermometer-liquid" x="162" y="240" width="6" height="10" rx="3" fill="#ef4444" />
                            <circle cx="165" cy="250" r="8" fill="#ef4444" />
                            
                            <!-- Bubbles Group -->
                            <g id="bubbles"></g>

                            <!-- Fire -->
                            <text id="fire-emoji-tab3" x="85" y="290" font-size="30" opacity="0.2">üî•</text>
                        </svg>
                        
                        <button id="heat-btn-tab3" class="btn-primary px-6 py-2 mt-2 w-full max-w-xs">
                            C·∫•p nhi·ªát (+Q) üî•
                        </button>
                        <p id="temp-val-tab3" class="mt-2 font-bold text-red-600">20¬∞C</p>
                    </div>
                </div>
            </div>

            <!-- Tab: Ki·ªÉm Tra -->
            <div id="tab-quiz" class="tab-content">
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col h-[800px]">
                    <div class="p-4 bg-green-600 text-white flex justify-between items-center">
                        <h2 class="font-bold text-lg">üìù B√†i Ki·ªÉm Tra Tr·∫Øc Nghi·ªám</h2>
                        <span class="text-sm bg-green-700 px-2 py-1 rounded">Th·ªùi gian: T·ª± do</span>
                    </div>
                    <div class="flex-grow bg-gray-100 relative">
                        <iframe src="test.html" class="absolute inset-0 w-full h-full border-0" title="B√†i ki·ªÉm tra V·∫≠t L√Ω"></iframe>
                        <!-- Fallback text if iframe fails -->
                        <div class="absolute inset-0 flex items-center justify-center -z-10 text-gray-400">
                            ƒêang t·∫£i b√†i ki·ªÉm tra...
                        </div>
                    </div>
                    <div class="p-4 bg-gray-50 text-right border-t">
                        <button class="btn-secondary px-6 py-2" onclick="alert('H√£y n·ªôp b√†i trong khung b√†i ki·ªÉm tra ph√≠a tr√™n nh√©!')">N·ªôp b√†i</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // 1. UI LOGIC & NAVIGATION
        
        function startLearning() {
            const cover = document.getElementById('cover-screen');
            const app = document.getElementById('main-app');
            
            // Animation slide up fade out
            cover.classList.add('fade-out-up');
            
            setTimeout(() => {
                cover.style.display = 'none';
                app.classList.remove('hidden');
                // Start SVG animations if needed or init default state
                initSimulations();
            }, 700);
        }

        function switchTab(tabId) {
            // Hide all contents
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // Show target content
            document.getElementById(tabId).classList.add('active');
            
            // Remove active classes from all buttons (Desktop & Mobile)
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active-tab'));
            document.querySelectorAll('.mobile-nav-btn').forEach(btn => btn.classList.remove('active-mobile-tab'));
            
            // Add active class to buttons matching the target (find by data attribute)
            const desktopBtn = document.querySelector(`.nav-btn[data-target="${tabId}"]`);
            if(desktopBtn) desktopBtn.classList.add('active-tab');

            const mobileBtn = document.querySelector(`.mobile-nav-btn[data-target="${tabId}"]`);
            if(mobileBtn) mobileBtn.classList.add('active-mobile-tab');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Close mobile menu if open
            closeMenu();
        }

        // Mobile Menu Logic
        const mobileMenu = document.getElementById('mobile-menu');
        const menuOverlay = document.getElementById('menu-overlay');

        function openMenu() {
            mobileMenu.classList.remove('-translate-x-full');
            menuOverlay.classList.remove('hidden');
        }

        function closeMenu() {
            mobileMenu.classList.add('-translate-x-full');
            menuOverlay.classList.add('hidden');
        }


        // 2. SIMULATION LOGIC (SVG ANIMATIONS)

        /* --- Tab 1: Particle System --- */
        let particles = [];
        const svg1 = document.getElementById('svg-internal-energy');
        const slider1 = document.getElementById('temp-slider-1');
        const display1 = document.getElementById('temp-display-1');
        let tempLevel = 3;
        let animationId1;

        function initSimulations() {
            // Create particles for Tab 1
            for(let i=0; i<30; i++) {
                let circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                circle.setAttribute("r", 5);
                circle.setAttribute("fill", "#6ee7b7"); // bright green
                circle.setAttribute("stroke", "#059669");
                svg1.appendChild(circle);
                particles.push({
                    el: circle,
                    x: Math.random() * 280 + 10,
                    y: Math.random() * 180 + 10,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2
                });
            }
            animateParticles();
        }

        slider1.addEventListener('input', (e) => {
            tempLevel = parseInt(e.target.value);
            const labels = ["R·∫•t L·∫°nh ü•∂", "L·∫°nh", "B√¨nh th∆∞·ªùng", "·∫§m", "N√≥ng", "R·∫•t N√≥ng ü•µ"];
            // Map 1-10 to label index roughly
            let labelIndex = Math.floor((tempLevel - 1) / 2);
            if (labelIndex > 4) labelIndex = 4; // Safety
            display1.textContent = `Nhi·ªát ƒë·ªô: ${tempLevel} - T·ªëc ƒë·ªô ph√¢n t·ª≠: ${tempLevel * 10}%`;
            
            // Color change based on temp
            particles.forEach(p => {
                if(tempLevel > 7) p.el.setAttribute("fill", "#fca5a5"); // redish
                else if (tempLevel > 4) p.el.setAttribute("fill", "#fde047"); // yellow
                else p.el.setAttribute("fill", "#6ee7b7"); // green
            });
        });

        function animateParticles() {
            particles.forEach(p => {
                // Speed depends on tempLevel
                let speedMultiplier = tempLevel * 0.5;
                
                p.x += p.vx * speedMultiplier;
                p.y += p.vy * speedMultiplier;

                // Bounce off walls
                if (p.x < 5 || p.x > 295) p.vx *= -1;
                if (p.y < 5 || p.y > 195) p.vy *= -1;

                // Update DOM
                p.el.setAttribute("cx", p.x);
                p.el.setAttribute("cy", p.y);
            });
            requestAnimationFrame(animateParticles);
        }

        /* --- Tab 2: Piston & Heat --- */
        const pistonHead = document.getElementById('piston-head');
        const pistonRod = document.getElementById('piston-rod');
        const gasArea = document.getElementById('gas-area');
        const flameGroup = document.getElementById('flame-group');
        const handEmoji = document.getElementById('hand-emoji');
        const pistonStatus = document.getElementById('piston-status');
        
        // Base positions
        const baseY = 90;
        const gasBaseHeight = 97;
        const gasBaseY = 100; // y pos of rect

        function triggerPistonAction(action) {
            // Reset visual states
            flameGroup.setAttribute("opacity", "0");
            handEmoji.setAttribute("opacity", "0");
            pistonHead.setAttribute("y", baseY);
            pistonRod.setAttribute("y", 0);
            gasArea.setAttribute("height", gasBaseHeight);
            gasArea.setAttribute("y", gasBaseY);
            gasArea.setAttribute("fill", "#e0f2fe"); // Cool blue

            if (action === 'reset') {
                pistonStatus.textContent = "Tr·∫°ng th√°i: B√¨nh th∆∞·ªùng";
                pistonStatus.className = "text-green-700 font-bold h-6";
                return;
            }

            if (action === 'work') {
                // Animation: Piston moves down
                pistonStatus.textContent = "Th·ª±c hi·ªán c√¥ng: N√©n kh√≠ -> Kh√≠ n√≥ng l√™n!";
                pistonStatus.className = "text-red-600 font-bold h-6";
                handEmoji.setAttribute("opacity", "1");
                
                // Animate DOM attributes directly for simplicity
                let frame = 0;
                function compress() {
                    if (frame > 20) {
                        gasArea.setAttribute("fill", "#fca5a5"); // Red/Hot
                        return; 
                    }
                    let shift = frame * 2;
                    pistonHead.setAttribute("y", baseY + shift);
                    pistonRod.setAttribute("y", shift);
                    gasArea.setAttribute("y", gasBaseY + shift);
                    gasArea.setAttribute("height", gasBaseHeight - shift);
                    frame++;
                    requestAnimationFrame(compress);
                }
                compress();
            }

            if (action === 'heat') {
                pistonStatus.textContent = "Truy·ªÅn nhi·ªát: ƒê·ªët n√≥ng -> Kh√≠ n√≥ng l√™n & n·ªü ra!";
                pistonStatus.className = "text-orange-600 font-bold h-6";
                flameGroup.setAttribute("opacity", "1");
                
                // Animate: Gas gets red, then expands pushing piston up
                setTimeout(() => {
                    gasArea.setAttribute("fill", "#fca5a5"); // Red
                    
                    let frame = 0;
                    function expand() {
                        if(frame > 20) return;
                        let shift = frame * 1.5;
                        pistonHead.setAttribute("y", baseY - shift);
                        pistonRod.setAttribute("y", -shift);
                        gasArea.setAttribute("y", gasBaseY - shift);
                        gasArea.setAttribute("height", gasBaseHeight + shift);
                        frame++;
                        requestAnimationFrame(expand);
                    }
                    setTimeout(expand, 500); // Wait a bit for "heating"
                }, 100);
            }
        }

        /* --- Tab 3: Calorimetry --- */
        const heatBtn = document.getElementById('heat-btn-tab3');
        const liquid = document.getElementById('thermometer-liquid');
        const tempText = document.getElementById('temp-val-tab3');
        const waterRect = document.getElementById('water-rect');
        const fireEmoji3 = document.getElementById('fire-emoji-tab3');
        const bubblesGroup = document.getElementById('bubbles');
        
        let currentTemp = 20;
        let isHeating = false;

        heatBtn.addEventListener('mousedown', () => {
            isHeating = true;
            fireEmoji3.setAttribute("opacity", "1");
            waterRect.setAttribute("fill", "#93c5fd"); // slightly darker blue
            animateHeatUp();
        });

        document.addEventListener('mouseup', () => {
            isHeating = false;
            fireEmoji3.setAttribute("opacity", "0.2");
            waterRect.setAttribute("fill", "#60a5fa"); // back to normal blue
            bubblesGroup.innerHTML = ''; // Clear bubbles
        });

        function animateHeatUp() {
            if (!isHeating || currentTemp >= 100) {
                if(currentTemp >= 100) tempText.textContent = "100¬∞C (S√¥i!)";
                return;
            }
            
            currentTemp += 0.5;
            
            // Map 20-100 deg C to height 10-150px approx
            // Range = 80 deg. Height Range = 140px. Ratio = 1.75
            let height = 10 + (currentTemp - 20) * 1.75;
            let yPos = 250 - height; // base y is 250 (bottom of rect) - height

            liquid.setAttribute("height", height);
            liquid.setAttribute("y", yPos);
            tempText.textContent = Math.floor(currentTemp) + "¬∞C";

            // Add bubbles if temp > 80
            if (currentTemp > 80 && Math.random() > 0.7) {
                let bub = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                bub.setAttribute("r", Math.random() * 3 + 1);
                bub.setAttribute("cx", Math.random() * 80 + 60); // inside beaker x range
                bub.setAttribute("cy", 240);
                bub.setAttribute("fill", "white");
                bub.setAttribute("opacity", "0.7");
                bubblesGroup.appendChild(bub);
                
                // Animate bubble up
                let by = 240;
                function rise() {
                    by -= 2;
                    bub.setAttribute("cy", by);
                    if (by > 60) requestAnimationFrame(rise);
                    else if(bub.parentNode) bub.parentNode.removeChild(bub);
                }
                rise();
            }

            requestAnimationFrame(animateHeatUp);
        }

        // Initialize active tab state on load (though hidden by cover)
        switchTab('tab-intro');

    </script>
</body>
</html>